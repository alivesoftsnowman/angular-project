<!DOCTYPE html>
<html>
<script src="assets/js/angular.min.js"></script>
<script src="assets/js/angular-route.js"></script>

<body ng-app="myApp">

    <p><a href="#/!">Main</a></p>

    <a href="#!login/register/home">check</a>


    <div ng-view></div>

    <script>
        var app = angular.module("myApp", ["ngRoute"]);
        app.config(function ($routeProvider) {
            $routeProvider
                .when("/", {
                    templateUrl: "main.htm"
                })
                .when("/login/register/home", {
                    templateUrl: "check.htm",
                    controller: "formCtrl"
                });
        })
        
        // .config(function($stateProvider, $urlRouterProvider) {
        //     $stateProvider

        //         .state('app', {
        //         url: '/app',
        //         abstract: true,
        //         templateUrl: 'templates/menu.html',
        //         controller: 'AppCtrl'
        //     })

        //     .state('app.start', {
        //         url: '/start',
        //         views: {
        //             'menuContent': {
        //             templateUrl: 'templates/start.html',
        //             controller: 'StartCtrl'
        //             }
        //         }
        //         })
        //     })



        app.controller('formCtrl', function ($scope, $http, $location) {
            $scope.login = function () {
                var send_data = { user_name: $scope.user_name, user_pass: $scope.user_pass };
                console.log(send_data);
                $http.post("checkauth.php", send_data).then(function (res) {
                    var msg = res.data.msg;
                    // console.log(user.msg);
                    $scope.mydata = res.data;
                    if (msg == 'success') {
                        console.log(res.data);
                        if(res.data=="yes")$location.url();

                        // $rootScope.saveDataLocalStorage($rootScope.loginData);
                        //console.log("save data:"+JSON.stringify($rootScope.loginData));
                    }
                }).catch(function (err) {
                    console.log(err);
                });
            }

            $scope.gotoMain = function(){

            }


            // $scope.login();
        });



    </script>
    <script>

    </script>

    <p>This is a My first AngularJS site.</p>
</body>

</html>